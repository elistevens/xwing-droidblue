"""

basic phase order
exceptional turn order

reaction to other thing
    based on state.incomingEdges[-1]



replacement happens immediately

ability queue
currently resolving ability (pop from queue)
ability must be an edge queue
replacements can modify the edge queue
otherwise, once started, they can be fast-forwarded

state.ability_deque
state.ability_deque[0].edge_list
state.ability_edge_list

state.active_ability = state.ability_deque.popleft()



step trigger
event trigger

class Rule
class Ability

"""
